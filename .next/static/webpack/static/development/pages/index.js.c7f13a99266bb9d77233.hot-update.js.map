{"version":3,"file":"static/webpack/static/development/pages/index.js.c7f13a99266bb9d77233.hot-update.js","sources":["webpack:///./components/Home/Home.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { HomeWrapperStyle } from \"../../PagesStyles/HomeStyle\";\nimport { tween, styler, easing } from \"popmotion\";\nimport { interpolate } from \"flubber\"; // ES6\nimport { SectionTitle } from \"./SectionTitle\";\nimport HomeText from \"../../content/home.json\";\nimport CrossfadeImage from \"../CrossFadeImage\";\nimport $ from \"jquery\";\nimport Bubbles from \"./Bubles\";\nimport ReactCSSTransitionGroup from \"react-addons-css-transition-group\";\n\nconst images = [\n  \"../../static/imgPilates.jpg\",\n  \"../../static/imgTratamientos.jpg\",\n  \"../../static/imgEcografÃ­a.jpg\",\n  \"../../static/imgFisioterapia.jpg\"\n];\n\nvar interval;\n\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shape: undefined,\n      vw: undefined,\n      vh: undefined,\n      animation: undefined,\n      formPosition: 1,\n      count: 0,\n      form: [\n        \"M 150.9 -224.2 C 196.3 -205.7 234.1 -165 246.2 -118.4 C 258.2 -71.8 244.4 -19.3 234.1 31.7 C 223.8 82.8 216.9 132.4 189.6 164.8 C 162.3 197.2 114.5 212.3 66.4 226.7 C 18.2 241.2 -30.3 254.9 -72.7 244.1 C -115.1 233.2 -151.2 197.8 -173.1 158.1 C -194.9 118.3 -202.4 74.2 -209.2 29.8 C -216 -14.6 -222.2 -59.5 -211 -101.5 C -199.8 -143.5 -171.3 -182.8 -133.2 -204.6 C -95.2 -226.4 -47.6 -230.7 2.6 -234.8 C 52.8 -238.8 105.6 -242.7 150.9 -224.2 Z\",\n        \"M 115.7 -186.7 C 150 -158 177.8 -126 192.7 -89.2 C 207.7 -52.4 209.7 -11 207.2 32.2 C 204.7 75.3 197.6 120.2 174.7 157.3 C 151.8 194.5 113.1 223.9 67.7 242.9 C 22.3 261.9 -29.9 270.6 -74 255.9 C -118.1 241.1 -154.3 203.1 -189.1 163.5 C -224 124 -257.5 82.9 -258.3 40.5 C -259.2 -1.9 -227.4 -45.6 -203.5 -90.8 C -179.6 -136.1 -163.6 -182.9 -131 -212.3 C -98.4 -241.8 -49.2 -253.9 -4.2 -247.3 C 40.7 -240.7 81.5 -215.4 115.7 -186.7 Z\",\n        \"M 93.9 -104.7 C 135.9 -76.6 194 -60.5 203.7 -32 C 213.4 -3.5 174.7 37.5 141.3 68.7 C 108 99.9 80 121.4 52 122.9 C 24.1 124.4 -3.9 105.9 -52.2 105 C -100.6 104.1 -169.4 120.8 -197.2 100.4 C -225.1 80 -212 22.4 -195.9 -28.6 C -179.8 -79.6 -160.6 -124 -127.4 -153.7 C -94.3 -183.4 -47.1 -198.2 -10.6 -185.5 C 25.9 -172.9 51.9 -132.8 93.9 -104.7 Z\",\n        \"M 183.6 -174.4 C 230.9 -136.2 257.5 -68.1 245.2 -12.3 C 232.9 43.6 181.9 87.2 134.5 127.5 C 87.2 167.9 43.6 204.9 -6.2 211.2 C -56.1 217.4 -112.2 192.9 -149.9 152.5 C -187.5 112.2 -206.8 56.1 -207.9 -1.2 C -209.1 -58.5 -192.2 -116.9 -154.6 -155.1 C -116.9 -193.2 -58.5 -211.1 4.8 -216 C 68.1 -220.8 136.2 -212.6 183.6 -174.4 Z\",\n        \"M 154 -190.7 C 194.1 -150 217.2 -96.2 216.5 -46.1 C 215.9 3.9 191.5 50.2 159.7 80 C 128 109.8 88.8 123 50.1 136.5 C 11.5 150 -26.6 163.8 -66.3 159.3 C -106 154.7 -147.4 131.9 -169.6 96.4 C -191.8 61 -194.9 13.1 -183.1 -28.6 C -171.4 -70.3 -144.8 -105.6 -111.8 -147.6 C -78.8 -189.6 -39.4 -238.3 8.8 -248.8 C 57 -259.3 114 -231.5 154 -190.7 Z\"\n      ]\n    };\n  }\n\n  _makeAnimation = (from, to) => {\n    tween({\n      duration: 1000,\n      ease: easing.easeInOut\n    })\n      .pipe(\n        interpolate(this.state.form[from], this.state.form[to], {\n          maxSegmentLength: 2\n        })\n      )\n      .start(styler(document.querySelector(\"#target\")).set(\"d\"));\n  };\n\n  _getEventTarget = e => {\n    e = e || window.event;\n    return e.target || e.srcElement;\n  };\n\n  _listenSliderButtons = () => {\n    let listItems = document.querySelectorAll(\"ul li\");\n\n    listItems.forEach((item, i) => {\n      item.onclick = e => {\n        this._changeSVGForm(\"down\", \"slider\", i);\n        this.setState({ ...this.state, formPosition: i + 1 });\n      };\n    });\n  };\n\n  _mouseWheel = () => {\n    let delta = 0;\n    // detect available wheel event\n    const wheelEvent =\n      \"onwheel\" in document.createElement(\"div\")\n        ? \"wheel\" // Modern browsers support \"wheel\"\n        : document.onmousewheel !== undefined\n        ? \"mousewheel\" // Webkit and IE support at least \"mousewheel\"\n        : \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\n    $(window).on(wheelEvent, e => {\n      if (e.originalEvent.wheelDelta > 0) {\n        window.scrollTo(0, 0);\n        delta++;\n        if (delta >= 5) {\n          delta = 0;\n          if (this.state.formPosition > 1) {\n            if (\n              (document.getElementsByTagName(\"body\")[0].style.overflowY =\n                \"hidden\")\n            ) {\n              document.getElementsByTagName(\"body\")[0].style.overflowY =\n              \"hidden\";\n              this._changeSVGForm(\"up\");\n            }\n          }\n        }\n      } else {\n        delta--;\n        if (delta <= -5) {\n          delta = 0;\n          this.state.formPosition < 4\n            ? this._changeSVGForm(\"down\")\n            : (document.getElementsByTagName(\"body\")[0].style.overflowY =\n                \"scroll\");\n        }\n      }\n    });\n  };\n\n  _changeBubble(pos) {\n    console.log(pos);\n    document.querySelectorAll(\".bubble\").forEach((div, i) => {\n      if (i === pos) {\n        document.querySelectorAll(\".bubble\")[pos].className = \"bubble active\";\n      } else {\n        document.querySelectorAll(\".bubble\")[i].className = \"bubble\";\n      }\n    });\n  }\n\n  _changeSVGForm = (direction, type = \"default\", fromTo) => {\n    this.setState(\n      {\n        ...this.state,\n        prevPosition: this.state.formPosition,\n        formPosition:\n          type === \"default\"\n            ? direction === \"down\"\n              ? this.state.formPosition + 1\n              : this.state.formPosition - 1\n            : fromTo + 1\n      },\n      () => {\n        this._changeBubble(this.state.formPosition - 1);\n        this._makeAnimation(this.state.prevPosition, this.state.formPosition);\n      }\n    );\n  };\n\n  _positioningSVG() {\n    document.getElementById(\"target\").style.transform = `translate(${this.state\n      .vw / 2}px, ${this.state.vh / 2}px) scale(2.4)`;\n  }\n\n  _startAnimation() {\n    this._positioningSVG();\n    this.state.animation.start(\n      styler(document.querySelector(\"#target\")).set(\"d\")\n    );\n  }\n\n  componentDidMount() {\n    this._listenSliderButtons();\n    this._mouseWheel();\n    tween({\n      from: { scale: 2.4 },\n      to: { scale: 2.6 },\n      duration: 1800,\n      ease: easing.easeInOut,\n      flip: Infinity\n    }).start(v => {\n      document.getElementById(\"target\").style.transform = `translate(${this\n        .state.vw / 1.7}px, ${this.state.vh / 2}px) scale(${v.scale})`;\n    });\n\n    // interval = setInterval(() => {\n    //   this._changeSVGForm(\"down\");\n    // }, 9000);\n\n    this.setState(\n      {\n        ...this.state,\n        shape: styler(document.querySelector(\"#target\")),\n        vw: window.innerWidth,\n        vh: window.innerHeight,\n        animation: tween({\n          duration: 1000,\n          ease: easing.easeInOut\n        }).pipe(\n          interpolate(\n            this.state.form[this.state.formPosition - 1],\n            this.state.form[this.state.formPosition],\n            { maxSegmentLength: 2 }\n          )\n        )\n      },\n      this._startAnimation\n    );\n  }\n\n  render() {\n    return (\n      <HomeWrapperStyle>\n        <Bubbles />\n        <CrossfadeImage\n          src={images[this.state.formPosition - 1]}\n          duration={3000}\n          timingFunction={\"ease-out\"}\n        />\n        <svg id=\"container\">\n          <clipPath id=\"svgPath\">\n            <path id=\"target\" />\n          </clipPath>\n        </svg>\n        <SectionTitle {...HomeText[this.state.formPosition - 1]} />\n      </HomeWrapperStyle>\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAOA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAoBA;AACA;AACA;AAFA;AAMA;AADA;AAKA;AACA;AA/BA;AAiCA;AACA;AACA;AACA;AApCA;AAsCA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AA/CA;AAiDA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAvFA;AAmGA;AAAA;AACA;AAAA;AAGA;AACA;AAJA;AAYA;AACA;AAAA;AACA;AAEA;AACA;AAnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAFA;AAiBA;AACA;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAqBA;AACA;AAEA;;;AAEA;AACA;AACA;AAAA;AAGA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AALA;AAOA;AAEA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAFA;AAOA;AAAA;AAbA;AAmBA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AA3LA;AACA;;;;;A","sourceRoot":""}